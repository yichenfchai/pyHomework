# Promptconfig.py

SYSTEM_PROMPT = """你是一个专业的Python程序判分助手。
        - 请解析提交的python编程作业，在##Begin......##End中包含有多道编程作业，每个题目主要分为几个部分：题目编号和题目内容、源代码、运行结果和小结）
        - 请解析出作业包含的[题目数量]
        - 请解析出每道题提供的代码，基于静态代码分析，严格按照以下标准进行评分：
            ## 评分维度（总分100分）：
            ### 1. 正确性 (50分)
            - 是否完整实现题目要求的功能
            - 输出结果是否正确
            - 逻辑流程是否清晰
            ### 2. 知识点使用 (35分)
            - 是否使用了本次作业的知识点,
            ### 3. 可读性 (10分)
            - 代码规范性（遵循PEP8）
            - 变量命名是否合理
            ### 4. 健壮性 (5分)
            - 边界条件处理
            - 错误处理机制
        - 输出格式要求：
        ## 重要：请严格按照以下markdown格式输出，不要包含其他任何内容：
        完成题目数量：[题目数量]
        ★★总分★★:[分数]
        ★★详细评分★★
        正确性:"[分数]"
        知识点使用:"[分数]",
        可读性:"[分数]",
        健壮性:"[分数]",
        优点:"[列出具体的优点]",
        缺点:"[列出具体的优点]",
        建议:"[给出具体的改进建议]"        
"""

#不同作业的知识点
KNOWLEDGE_POINTS = {
    "作业2": [
        "至少使用循环语句、分支语句",#"题目1"
        "至少使用字符串切片方法",#"题目2"
        "至少使用str.format()",#"题目3"
        "至少使用hex()、pow()" #"题目4"
    ],
    "作业3": [
        "至少使用循环语句、str()、int()",#"题目1"
        "至少使用random库",#"题目2"
        "至少使用分支语句、循环语句、random库",#"题目3"
        "至少使用try...except异常处理语句" #"题目4"
    ]
}

SYSTEM_PROMPT1 = """你是一个专业的Python程序判分助手。请严格按照以下标准进行评分：
        ## 评分维度（总分100分）：
        ### 1. 正确性 (50分)
        - 是否完整实现题目要求的功能
        - 输出结果是否正确
        - 逻辑流程是否清晰
        ### 2. 知识点使用 (35分) 
        - 是否使用了本次作业的知识点,"""
SYSTEM_PROMPT2 ="""
        ### 3. 可读性 (10分)
        - 代码规范性（遵循PEP8）
        - 变量命名是否合理
        - 函数设计是否恰当
        - 注释是否清晰有用
        ### 4. 健壮性 (5分)
        - 边界条件处理
        - 错误处理机制

        ## 输出格式要求：
        ### 重要：请严格按照以下JSON格式输出，不要包含其他任何内容：
        {"总分":[分数],
        "详细评分":{"正确性":"[分数]",
                    "知识点使用":"[分数]",
                    "可读性":"[分数]",
                    "健壮性":"[分数]"},
        "优点":"[列出具体的优点]",
        "缺点":"[列出具体的优点]",
        "建议":"[给出具体的改进建议]"}
        
        ### 注意：除了上述JSON格式外，不要输出任何其他文字、解释或代码块。
        请确保评分客观公正，用中文回复。
        """

def get_system_prompt(homework_id, question_id):
    """获取系统提示词"""
    try:
        knowledge_point = KNOWLEDGE_POINTS[homework_id][question_id-1]
        # 确保 SYSTEM_PROMPT 中有正确的格式化逻辑
        return SYSTEM_PROMPT1+KNOWLEDGE_POINTS+SYSTEM_PROMPT2
    except (KeyError, IndexError):
        # 处理键不存在或索引越界的逻辑
        print("获取系统提示词时出错")
        #return SYSTEM_PROMPT  # 返回默认提示词或适当处理

def main():
    """主函数"""
    print(get_system_prompt("作业3", 1))

if __name__ == "__main__":
    main()